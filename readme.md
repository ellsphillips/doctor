[repo-card-api]: https://github-readme-stats.vercel.app/api/pin/?username=ellsphillips&theme=react&repo=doctor&card_width=100%
[repo-card]: https://github.com/ellsphillips/doctor
[doctor-build]: https://i.imgur.com/8iuEgjZ.gif

[![Doctor summary][repo-card-api]](https://github.com/ellsphillips/doctor)

# Doctor

An automated documentation assitant built in Python and TeX for procedural, data-driven reporting.

Doctor simplifies the reporting build process through an intuitive Python API and customisable LaTeX class to responsively markup Pythonic data objects to professionally typeset lightweight documents.

## Installation

Clone the repo

```bash
$ git clone https://github.com/ellsphillips/doctor.git

$ cd doctor
```

Install the requirements

```bash
$ pip install -r requirements.txt
```

## Usage

To get started, import `doctor` into your python script. You have immediate access to 2 classes, `table` and `plot`- feed Doctor a dataframe object and watch it build beautiful `LaTeX` code. Returned as a literal, you can pass this result to any of the available methods to further build on or output to your `LaTeX` directory.

```python
  import doctor

  table = doctor.table(
    data.numerical((8, 4)),
    column_format=[0.1, 0.2, 0.3, 0.4],
    caption="Example table generated by Python",
    short_caption="Shorter caption for TOC",
    label="tabledemo"
  )

  print(table.get_result())

  doctor.build(outfile="report")
```

![Build your PDF with Doctor][doctor-build]

## Outputs

[](#outputs)

You can inspect the result through the console with `doctor.get_result()`, or use the provided `write_to()` method to output your LaTeX result to a relative directory path.

```python
  table = doctor.table(...)

  doctor.write_to("path/to/file")
```

This generates a new file if the name space is undefined, otherwise overwrites the content of the file. Doctor assumes you organise your LaTeX code through `input{}` calls.

Reference the [architecture below](#architecture) for an example.

```latex
  \begin{doctor-table}{4}
    {% Column format
      >{{\raggedleft\arraybackslash\hsize=\hsize}}X
      >{{\raggedleft\arraybackslash\hsize=\hsize}}X
      >{{\raggedleft\arraybackslash\hsize=\hsize}}X
      >{{\raggedleft\arraybackslash\hsize=\hsize}}X
    }{% Column headers
      \bfseries Numbers &
      \bfseries More numbers &
      \bfseries Text &
      \bfseries Mash \\
    }{% Caption
      Example table generated by Python
    }{% Label
      test
    }
    25 & 43 &       Lorem & iswdufvbouwesdbnvg \\
    82 & 71 &       ipsum &                abc \\
    23 & 52 &       dolor &            sdvcsdv \\
    82 & 85 &         sit &       sdvdssdvdvvn \\
    93 & 63 &        amet &          yumyumyum \\
    83 & 35 & consectetur &               wqoe \\
    87 & 51 &  adipiscing &            qphjpgh \\
    79 & 41 &        elit &    owperjgpowegjwj \\
    84 & 88 &   Curabitur &        wepogjwpeog \\
    60 &  7 &         nec &                 oi \\
  \end{doctor-table}
```

## Architecture

[](#architecture)

```shell
  doctor/
  â”œâ”€â”€ data
  â”‚   â”œâ”€â”€ __init__.py
  â”‚   â””â”€â”€ data.py
  â”œâ”€â”€ demo
  â”‚   â”œâ”€â”€ src
  â”‚   â”‚   â””â”€â”€ ...
  â”‚   â”œâ”€â”€ doctor.cls
  â”‚   â”œâ”€â”€ main.tex
  â”‚   â””â”€â”€ report.pdf
  â”œâ”€â”€ doctor
  â”‚   â”œâ”€â”€ builder
  â”‚   â”‚   â”œâ”€â”€ plot
  â”‚   â”‚   â””â”€â”€ table
  â”‚   â”œâ”€â”€ utils
  â”‚   â”‚   â”œâ”€â”€ __init__.py
  â”‚   â”‚   â”œâ”€â”€ cli.py
  â”‚   â”‚   â””â”€â”€ tex.py
  â”‚   â”œâ”€â”€ __init__.py
  â”‚   â””â”€â”€ doctor.py
  â””â”€â”€ app.py
```

<svg fill="none" viewBox="0 0 800 400" width="800" height="400" xmlns="http://www.w3.org/2000/svg">
	<foreignObject width="100%" height="100%">
		<div xmlns="http://www.w3.org/1999/xhtml">
			<style>
				.container {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          margin: 0;
          width: 100%;
          height: 400px;
          background: white;
          border-radius: 10px;
        }
        
        img {
          height: 100%;
        }
      </style>
      <div class="container">
        <img src="https://raw.githubusercontent.com/ellsphillips/doctor-assets/main/map.svg"">
      </div>
    </div>
  </foreignObject>
</svg>

<svg fill="none" viewBox="0 0 800 400" width="800" height="400" xmlns="http://www.w3.org/2000/svg">
	<foreignObject width="100%" height="100%">
		<div xmlns="http://www.w3.org/1999/xhtml">
			<style>
                .container {
                font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji';
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                margin: 0;
                width: 100%;
                height: 400px;
                /* background: linear-gradient(-45deg, #fc5c7d, #6a82fb, #05dfd7); */
                background: #333;
                background-size: 600% 400%;
                border-radius: 10px;
                /* color: white; */
                text-align: center;
                }

                /* .svg-wrapper {
                height: 60px;
                    margin: 0 auto;
                position: relative;
                top: 50%;
                transform: translateY(-50%);
                width: 320px;
                } */

                .shape {
                fill: transparent;
                stroke-dasharray: 140 540;
                stroke-dashoffset: -474;
                stroke-width: 8px;
                stroke: #19f6e8;
                }

                .text {
                color: #fff;
                font-family: 'Roboto Condensed';
                font-size: 22px;
                letter-spacing: 8px;
                line-height: 32px;
                position: relative;
                top: -48px;
                }

                @keyframes draw {
                0% {
                    stroke-dasharray: 140 540;
                    stroke-dashoffset: -474;
                    stroke-width: 8px;
                }
                100% {
                    stroke-dasharray: 760;
                    stroke-dashoffset: 0;
                    stroke-width: 2px;
                }
                }

                .svg-wrapper .shape {
                -webkit-animation: 1s draw linear forwards;
                animation: 1s draw linear forwards;
                }
			</style>
			<div class="container">
                <div class="svg-wrapper">
                    <svg height="60" width="320" xmlns="http://www.w3.org/2000/svg">
                        <rect class="shape" height="60" width="320" />
                    </svg>
                    <div class="text">text Box ðŸ¤–</div>
                </div>
            </div>
        </div>
	</foreignObject>
</svg>
